<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Car Listings</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}"/>
</head>
<body>

<div class="container">

    <!-- HEADER -->
    <div class="page-header">
        <div class="logo">CRMS</div>
    </div>

    <!-- SEARCH AREA -->
    <div class="search-wrapper">
        <h2>Tìm xe tự lái</h2>

        <form th:action="@{/public/cars}" method="get" class="search-box">
            <input
                    type="text"
                    name="name"
                    placeholder="Chọn địa điểm / tên xe"
                    th:value="${name}"
            />

            <button type="submit">TÌM XE</button>
            <a th:href="@{/public/cars}" class="clear-btn">XÓA</a>
        </form>
    </div>

    <!-- FILTER AREA -->
    <form th:action="@{/public/cars}" method="get" class="filter-box">

        <!-- giữ lại search -->
        <input type="hidden" name="name" th:value="${name}"/>

        <select name="seats">
            <option value="">Số chỗ</option>
            <option value="4">4 chỗ</option>
            <option value="5">5 chỗ</option>
            <option value="7">7 chỗ</option>
        </select>

        <select name="brand">
            <option value="">Hãng xe</option>
            <option value="Toyota">Toyota</option>
            <option value="Honda">Honda</option>
            <option value="Kia">Kia</option>
            <option value="Hyundai">Hyundai</option>
        </select>

        <select name="carType">
            <option value="">Loại xe</option>
            <option value="Sedan">Sedan</option>
            <option value="SUV">SUV</option>
            <option value="Hatchback">Hatchback</option>
        </select>

        <select name="fuelType">
            <option value="">Nhiên liệu</option>
            <option value="Petrol">Petrol</option>
            <option value="Diesel">Diesel</option>
            <option value="Electric">Electric</option>
            <option value="Hybrid">Hybrid</option>
        </select>

        <input
                type="text"
                name="location"
                placeholder="Địa điểm"
        />

        <button type="submit">LỌC</button>
    </form>

    <!-- EMPTY -->
    <div th:if="${cars.empty}">
        <p>Không tìm thấy xe.</p>
    </div>

    <!-- CAR LIST -->
    <div class="car-list" th:if="${!cars.empty}">
        <div class="car-item" th:each="car : ${cars}">

            <img th:if="${car.mainImageUrl != null}"
                 th:src="@{${car.mainImageUrl}}"
                 alt="Car image"/>

            <img th:unless="${car.mainImageUrl != null}"
                 src="/images/placeholder-car.png"
                 alt="placeholder"/>

            <div class="car-meta">
                <h3 th:text="${car.name}">Car name</h3>
                <p th:text="${car.brand} + ' - ' + ${car.model}"></p>
                <p th:text="${car.location}"></p>

                <p class="car-price"
                   th:text="${#numbers.formatDecimal(car.pricePerDay, 1, 'COMMA', 0, 'POINT')} + 'K/ngày'">
                    0K/ngày
                </p>

                <p class="rating">
                    ⭐ <span th:text="${car.averageRating}">0.0</span>
                </p>
            </div>
        </div>
    </div>

</div>

</body>
</html>
