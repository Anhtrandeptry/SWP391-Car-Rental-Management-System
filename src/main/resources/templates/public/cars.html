<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Car Listings</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body>

<div class="container">

    <!-- HEADER -->
    <div class="page-header">
        <div class="logo">CRMS</div>
    </div>

    <!-- SEARCH AREA (KHUNG TÍM) -->
    <div class="search-wrapper">
        <h2>Tìm xe tự lái</h2>

        <form th:action="@{/public/cars}" method="get" class="search-box">
            <input
                    type="text"
                    name="name"
                    placeholder="Chọn địa điểm / tên xe"
                    th:value="${name}"
            />

            <button type="submit">TÌM XE</button>

            <a th:href="@{/public/cars}" class="clear-btn">XÓA</a>
        </form>
    </div>

    <!-- EMPTY -->
    <div th:if="${cars.empty}">
        <p>Không tìm thấy xe.</p>
    </div>

    <!-- CAR LIST -->
    <div class="car-list" th:if="${!cars.empty}">
        <div class="car-item" th:each="car : ${cars}">

            <img th:if="${car.mainImageUrl != null}"
                 th:src="${car.mainImageUrl}"
                 alt="Car image"/>

            <img th:unless="${car.mainImageUrl != null}"
                 src="/images/placeholder-car.png"
                 alt="placeholder"/>

            <div class="car-meta">
                <h3 th:text="${car.name}">Car name</h3>
                <p th:text="${car.brand} + ' - ' + ${car.model}"></p>
                <p th:text="${car.location}"></p>

                <p class="car-price"
                   th:text="${#numbers.formatDecimal(car.pricePerDay, 1, 'COMMA', 0, 'POINT')} + 'K/ngày'">
                    0K/ngày
                </p>

                <p class="rating">
                    ⭐ <span th:text="${car.averageRating}">0.0</span>
                </p>
            </div>
        </div>
    </div>

</div>

</body>
</html>
