<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Hồ Sơ Cá Nhân</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { background:#f5f7fb; }
        .topbar { background:#0d6efd; color:#fff; padding:14px 18px; font-weight:700; }
        .sidebar { background:#fff; border-right:1px solid #e7e7e7; min-height: calc(100vh - 56px); }
        .avatar { width:90px; height:90px; border-radius:50%; background:#0d6efd; color:#fff;
            display:flex; align-items:center; justify-content:center; font-size:28px; font-weight:700; margin:10px auto; }
        .menu a { display:flex; gap:10px; align-items:center; padding:10px 14px; color:#333; text-decoration:none; }
        .menu a.active { background:#eaf2ff; border-left:3px solid #0d6efd; font-weight:600; }
        .card-stat { background:#fff; border:1px solid #eee; border-radius:10px; padding:16px; display:flex; gap:12px; align-items:center; }
        .icon-circle { width:44px; height:44px; border-radius:50%; background:#eaf2ff; display:flex; align-items:center; justify-content:center; color:#0d6efd; }
        .content-card { background:#fff; border:1px solid #eee; border-radius:10px; padding:18px; }
        .btn-row { display:flex; gap:12px; justify-content:flex-start; margin-top:16px; }
    </style>
</head>
<body>

<div class="topbar">Hồ Sơ Cá Nhân</div>

<div class="container-fluid">
    <div class="row">

        <!-- Sidebar -->
        <div class="col-12 col-md-3 col-lg-2 sidebar">
            <div class="text-center p-3">
                <div class="avatar" th:text="${initials}">NVA</div>
                <div class="fw-semibold" th:text="${u.firstName + ' ' + u.lastName}">Nguyễn Văn A</div>
            </div>

            <div class="menu">
                <a class="active" href="/profile"><i class="bi bi-person"></i> Hồ sơ</a>
                <a href="#"><i class="bi bi-clock-history"></i> Lịch sử</a>
                <a href="#"><i class="bi bi-heart"></i> Yêu thích</a>
                <a href="/profile/change-password"><i class="bi bi-key"></i> Đổi mật khẩu</a>
            </div>
        </div>

        <!-- Main -->
        <div class="col-12 col-md-9 col-lg-10 p-4">

            <!-- Stats -->
            <div class="row g-3 mb-3">
                <div class="col-md-4">
                    <div class="card-stat">
                        <div class="icon-circle"><i class="bi bi-car-front"></i></div>
                        <div>
                            <div class="fs-4 fw-bold" th:text="${stats.trips}">15</div>
                            <div class="text-muted">Chuyến đi</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card-stat">
                        <div class="icon-circle"><i class="bi bi-heart"></i></div>
                        <div>
                            <div class="fs-4 fw-bold" th:text="${stats.favorites}">3</div>
                            <div class="text-muted">Yêu thích</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card-stat">
                        <div class="icon-circle"><i class="bi bi-star"></i></div>
                        <div>
                            <div class="fs-4 fw-bold" th:text="${stats.rating}">4.8</div>
                            <div class="text-muted">Đánh giá</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Info -->
            <div class="content-card">
                <h5 class="fw-bold mb-3">Thông Tin Cá Nhân</h5>

                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Họ</label>
                        <input class="form-control" th:value="${u.firstName}" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Tên</label>
                        <input class="form-control" th:value="${u.lastName}" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Giới tính</label>
                        <input class="form-control"
                               th:value="${u.gender == 'MALE' ? 'Nam' : (u.gender == 'FEMALE' ? 'Nữ' : 'Khác')}"
                               readonly>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Số điện thoại</label>
                        <input class="form-control" th:value="${u.phoneNumber}" readonly>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Email</label>
                        <input class="form-control" th:value="${u.email}" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Địa chỉ</label>
                        <input class="form-control" th:value="${u.address}" readonly>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Số CMND/CCCD</label>
                        <input class="form-control" th:value="${u.nationalId}" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Giấy phép lái xe</label>
                        <input class="form-control" th:value="${u.driversLicense}" readonly>
                    </div>
                </div>

                <div class="btn-row">
                    <a class="btn btn-primary px-4" href="/profile/edit">Chỉnh sửa</a>

                </div>

                <div class="mt-3" th:if="${pwdOk}">
                    <div class="alert alert-success mb-0">Đổi mật khẩu thành công</div>
                </div>
            </div>

        </div>
    </div>
</div>

</body>
</html>
